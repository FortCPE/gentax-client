(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e041286"],{"00fd":function(t,e,n){var a=n("9e69"),o=Object.prototype,i=o.hasOwnProperty,r=o.toString,s=a?a.toStringTag:void 0;function c(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var a=!0}catch(c){}var o=r.call(t);return a&&(e?t[s]=n:delete t[s]),o}t.exports=c},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},"1a8c":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},2731:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{attrs:{action:"javascript:void(0)"},on:{submit:function(e){return t.stockSubmit()}}},[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col md:w-12/12 w-full mb-base"},[n("vx-card",{attrs:{title:t.$t("ManageStock"),icon:"AlertTriangleIcon"}},[n("b-table",{ref:"table",attrs:{data:t.stockData,loading:t.stockFetching,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","show-detail-icon":t.showDetailIcon,detailed:"","detail-key":"stock_id"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(t.columns,(function(a){return[n("b-table-column",t._b({key:a.id,scopedSlots:t._u([{key:"searchable",fn:function(e){return a.searchable?[n("b-input",{attrs:{placeholder:"ค้นหาข้อมูล",icon:"magnify",size:"is-small"},model:{value:e.filters[e.column.field],callback:function(n){t.$set(e.filters,e.column.field,n)},expression:"props.filters[props.column.field]"}})]:void 0}}],null,!0)},"b-table-column",a,!1),["index"===a.field?n("span",[n("b-tag",{attrs:{rounded:"",type:"is-light"}},[t._v(t._s(e.index+1))])],1):"options"===a.field?n("span",[[n("vs-button",{attrs:{color:"primary",type:"relief",size:"small"},on:{click:function(n){return t.toggle(e.row)}}},[t._v("\n                                                ดูเพิ่มเติม\n                                            ")])]],2):"stock_name"===a.field?n("span",{staticClass:"th-font"},[n("b-input",{attrs:{value:e.row.stock_name,placeholder:"กรุณาแก้ไขข้อมูล",icon:"pencil",size:"is-small"},on:{blur:function(n){return t.changeStockName(e.row.stock_id,n)}}})],1):"stock_type"===a.field?n("span",{staticClass:"th-font"},[n("b-autocomplete",{attrs:{rounded:"",data:t.typeData,placeholder:"กรุณากรอกประเภทสินค้า",field:"type_name",icon:"magnify",loading:t.typeFetching,value:e.row.type_name,size:"is-small"},on:{typing:t.getTypeAsyncData,select:function(n){return t.changeStockType(e.row.stock_id,n)}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"media"},[n("div",{staticClass:"media-content"},[t._v("\n                                                        "+t._s(e.option.type_name)+"\n                                                    ")])])]}}],null,!0)})],1):"stock_unit"===a.field?n("span",{staticClass:"th-font"},[n("b-autocomplete",{attrs:{rounded:"",data:t.unitData,placeholder:"กรุณากรอกหน่วยสินค้า",field:"unit_name",icon:"magnify",loading:t.unitFetching,value:e.row.unit_name,size:"is-small"},on:{typing:t.getUnitAsyncData,select:function(n){return t.changeStockUnit(e.row.stock_id,n)}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"media"},[n("div",{staticClass:"media-content"},[t._v("\n                                                        "+t._s(e.option.unit_name)+"\n                                                    ")])])]}}],null,!0)})],1):t._e()])]}))]}},{key:"detail",fn:function(e){return[n("article",{staticClass:"media"},[n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("b-field",{attrs:{horizontal:"",label:"ราคาสินค้า"}},[n("b-input",{attrs:{step:"any",type:"number",value:e.row.stock_price,placeholder:"กรุณาแก้ไขข้อมูล",icon:"pencil",size:"is-small"},on:{blur:function(n){return t.changeStockPrice(e.row.stock_id,n)}}})],1),n("b-field",{attrs:{horizontal:"",label:"รายละเอียดสินค้า"}},[n("b-input",{attrs:{type:"textarea",maxlength:"300",placeholder:"กรุณากรอกรายละเอียดสินค้า",value:e.row.stock_desc,size:"is-small"},on:{blur:function(n){return t.changeStockDesc(e.row.stock_id,n)}}})],1)],1)])])]}}])})],1)],1)])])])},o=[],i=(n("ac6a"),n("b047")),r=n.n(i),s={data:function(){return{columns:[{field:"index",label:"ลำดับ",width:"50",numeric:!0,searchable:!1,centered:!0},{field:"stock_name",label:"ชื่อสินค้า",searchable:!0},{field:"stock_type",label:"ประเภทสินค้า",searchable:!0},{field:"stock_unit",label:"หน่วยสินค้า",searchable:!0},{field:"options",label:"ตัวเลือก",searchable:!1}],isPaginated:!0,isPaginationSimple:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:10,stockData:[],stockFetching:!0,currentStockName:"",currentStockType:"",currentStockUnit:"",currentStockPrice:"",currentStockDesc:"",typeData:[],typeFetching:!1,unitData:[],unitFetching:!1,alertMessage:"",alertPosition:"",alertType:"",showDetailIcon:!1}},methods:{getStockAsyncData:function(){var t=this;this.stockData=[],this.stockFetching=!0,this.$http.get("https://gservernodejs.herokuapp.com/api/stock/all").then((function(e){var n=e.data;t.stockData=[],"ERROR|EMPTYINFO"!==n&&n.forEach((function(e){return t.stockData.push(e)}))})).catch((function(e){throw t.stockData=[],e})).finally((function(){t.stockFetching=!1}))},getTypeAsyncData:r()((function(t){var e=this;t.length?(this.typeFetching=!0,this.$http.get("https://gservernodejs.herokuapp.com/api/type/name/"+t).then((function(t){var n=t.data;if(e.typeData=[],"ERROR|EMPTYINFO"!==n)n.forEach((function(t){return e.typeData.push(t)}));else{var a={type_name:"ไม่พบรายการประเภทสินค้าค่ะ"};e.typeData.push(a)}})).catch((function(t){throw e.typeData=[],t})).finally((function(){e.typeFetching=!1}))):this.unitData=[]}),500),getUnitAsyncData:r()((function(t){var e=this;t.length?(this.unitFetching=!0,this.$http.get("https://gservernodejs.herokuapp.com/api/unit/name/"+t).then((function(t){var n=t.data;if(e.unitData=[],"ERROR|EMPTYINFO"!==n)n.forEach((function(t){return e.unitData.push(t)}));else{var a={unit_name:"ไม่พบรายการหน่วยสินค้านี้ค่ะ"};e.unitData.push(a)}})).catch((function(t){throw e.unitData=[],t})).finally((function(){e.unitFetching=!1}))):this.unitData=[]}),500),changeStockName:function(t,e){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/stock/manage/name",{stock_id:t,stock_name:e.target.value}).then((function(t){"SUCCEED|UPDATED"===t.data&&(n.alertMessage="แก้ไขชื่อสินค้าแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getStockAsyncData(),n.alert())}))},changeStockType:function(t,e){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/stock/manage/type",{stock_id:t,stock_type:e.type_id}).then((function(t){"SUCCEED|UPDATED"===t.data?(n.alertMessage="แก้ไขประเภทสินค้าแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getStockAsyncData()):"ERROR|TYPE_404"===t.data?(n.alertMessage="ผิดพลาด, ไม่พบข้อมูลประเภทสินค้านี้ค่ะ",n.alertPosition="bottom-right",n.alertType="danger"):"ERROR|STOCK_404"===t.data?(n.alertMessage="ผิดพลาด, ไม่พบข้อมูลสินค้านี้ค่ะ",n.alertPosition="bottom-right",n.alertType="danger"):(n.alertMessage="ผิดพลาด, กรุณาติดต่อแอดมินค่ะ",n.alertPosition="bottom-right",n.alertType="danger"),n.alert()}))},changeStockUnit:function(t,e){var n=this;"ไม่พบรายการหน่วยสินค้านี้ค่ะ"==e.unit_name?(this.alertMessage="ผิดพลาด, กรุณาเลือกหน่วยสินค้าด้วยค่ะ",this.alertPosition="bottom-right",this.alertType="danger",this.alert()):this.$http.post("https://gservernodejs.herokuapp.com/api/stock/manage/unit",{stock_id:t,stock_unit:e.unit_id}).then((function(t){"SUCCEED|UPDATED"===t.data?(n.alertMessage="แก้ไขหน่วยสินค้าแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success"):"ERROR|UNIT_404"===t.data?(n.alertMessage="ผิดพลาด, ไม่พบข้อมูลหน่วยสินค้านี้ค่ะ",n.alertPosition="bottom-right",n.alertType="danger"):"ERROR|STOCK_404"===t.data?(n.alertMessage="ผิดพลาด, ไม่พบข้อมูลสินค้านี้ค่ะ",n.alertPosition="bottom-right",n.alertType="danger"):(n.alertMessage="ผิดพลาด, กรุณาติดต่อแอดมินค่ะ",n.alertPosition="bottom-right",n.alertType="danger"),n.alert(),n.getStockAsyncData()}))},changeStockPrice:function(t,e){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/stock/manage/price",{stock_id:t,stock_price:e.target.value}).then((function(t){"SUCCEED|UPDATED"===t.data&&(n.alertMessage="แก้ไขราคาสินค้าแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getStockAsyncData(),n.alert())}))},changeStockDesc:function(t,e){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/stock/manage/desc",{stock_id:t,stock_desc:e.target.value}).then((function(t){"SUCCEED|UPDATED"===t.data&&(n.alertMessage="แก้ไขรายละเอียดสินค้าแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getStockAsyncData(),n.alert())}))},deleteStock:function(t){this.confirmCustomDelete(t)},alert:function(){this.$vs.notify({title:"Gentax",text:this.alertMessage,color:this.alertType,position:this.alertPosition})},confirmCustomDelete:function(t){var e=this;this.$buefy.dialog.confirm({title:"ยืนยันการลบสินค้า",message:"คุณมั่นใจว่าต้องการลบสินค้าชิ้นนี้, สินค้าจะไม่สามารถกู้คืนได้",confirmText:"ลบสินค้า",cancelText:"ย้อนกลับ",type:"danger",hasIcon:!0,onConfirm:function(){e.$http.post("https://gservernodejs.herokuapp.com/api/stock/delete",{stock_id:t}).then((function(t){"SUCCEED|DELETED"===t.data&&(e.alertMessage="ลบสินค้าแล้วค่ะ",e.alertPosition="bottom-right",e.alertType="success",e.getStockAsyncData(),e.alert())}))}})},toggle:function(t){this.$refs.table.toggleDetails(t)}},mounted:function(){this.getStockAsyncData()}},c=s,l=n("2877"),u=Object(l["a"])(c,a,o,!1,null,null,null);e["default"]=u.exports},"29f3":function(t,e){var n=Object.prototype,a=n.toString;function o(t){return a.call(t)}t.exports=o},"2b3e":function(t,e,n){var a=n("585a"),o="object"==typeof self&&self&&self.Object===Object&&self,i=a||o||Function("return this")();t.exports=i},3729:function(t,e,n){var a=n("9e69"),o=n("00fd"),i=n("29f3"),r="[object Null]",s="[object Undefined]",c=a?a.toStringTag:void 0;function l(t){return null==t?void 0===t?s:r:c&&c in Object(t)?o(t):i(t)}t.exports=l},"408c":function(t,e,n){var a=n("2b3e"),o=function(){return a.Date.now()};t.exports=o},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},"9e69":function(t,e,n){var a=n("2b3e"),o=a.Symbol;t.exports=o},b047:function(t,e,n){var a=n("1a8c"),o=n("408c"),i=n("b4b0"),r="Expected a function",s=Math.max,c=Math.min;function l(t,e,n){var l,u,p,f,d,h,g=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError(r);function b(e){var n=l,a=u;return l=u=void 0,g=e,f=t.apply(a,n),f}function k(t){return g=t,d=setTimeout(S,e),m?b(t):f}function D(t){var n=t-h,a=t-g,o=e-n;return v?c(o,p-a):o}function _(t){var n=t-h,a=t-g;return void 0===h||n>=e||n<0||v&&a>=p}function S(){var t=o();if(_(t))return T(t);d=setTimeout(S,D(t))}function T(t){return d=void 0,y&&l?b(t):(l=u=void 0,f)}function P(){void 0!==d&&clearTimeout(d),g=0,l=h=u=d=void 0}function E(){return void 0===d?f:T(o())}function x(){var t=o(),n=_(t);if(l=arguments,u=this,h=t,n){if(void 0===d)return k(h);if(v)return clearTimeout(d),d=setTimeout(S,e),b(h)}return void 0===d&&(d=setTimeout(S,e)),f}return e=i(e)||0,a(n)&&(m=!!n.leading,v="maxWait"in n,p=v?s(i(n.maxWait)||0,e):p,y="trailing"in n?!!n.trailing:y),x.cancel=P,x.flush=E,x}t.exports=l},b4b0:function(t,e,n){var a=n("1a8c"),o=n("ffd6"),i=NaN,r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function p(t){if("number"==typeof t)return t;if(o(t))return i;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=c.test(t);return n||l.test(t)?u(t.slice(2),n?2:8):s.test(t)?i:+t}t.exports=p},ffd6:function(t,e,n){var a=n("3729"),o=n("1310"),i="[object Symbol]";function r(t){return"symbol"==typeof t||o(t)&&a(t)==i}t.exports=r}}]);
//# sourceMappingURL=chunk-0e041286.f04d574a.js.map
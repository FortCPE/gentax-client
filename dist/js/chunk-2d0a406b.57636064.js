(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a406b"],{"054d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{action:"javascript:void(0)"},on:{submit:function(t){return e.typeSubmit()}}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-12/12 w-full mb-base"},[a("vx-card",{attrs:{title:e.$t("ManageType"),icon:"AlertTriangleIcon"}},[a("b-table",{attrs:{data:e.typeData,loading:e.typeFetching,paginated:e.isPaginated,"per-page":e.perPage,"current-page":e.currentPage,"pagination-simple":e.isPaginationSimple,"pagination-position":e.paginationPosition,"default-sort-direction":e.defaultSortDirection,"sort-icon":e.sortIcon,"sort-icon-size":e.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.columns,(function(n){return[a("b-table-column",e._b({key:n.id,scopedSlots:e._u([{key:"searchable",fn:function(t){return n.searchable?[a("b-input",{attrs:{placeholder:"ค้นหาข้อมูล",icon:"magnify",size:"is-small"},model:{value:t.filters[t.column.field],callback:function(a){e.$set(t.filters,t.column.field,a)},expression:"props.filters[props.column.field]"}})]:void 0}}],null,!0)},"b-table-column",n,!1),["index"===n.field?a("span",[a("b-tag",{attrs:{rounded:"",type:"is-light"}},[e._v(e._s(t.index+1))])],1):"options"===n.field?a("span",[[a("vs-button",{attrs:{color:"danger",type:"relief",size:"small"},on:{click:function(a){return e.deleteType(t.row.type_id)}}},[e._v("\n                                                ลบประเภท\n                                            ")])]],2):"type_name"===n.field?a("span",{staticClass:"th-font"},[a("b-input",{attrs:{value:t.row.type_name,placeholder:"กรุณาแก้ไขข้อมูล",icon:"pencil",size:"is-small"},on:{blur:function(a){return e.changeTypeName(t.row.type_id,a)}}})],1):"type_desc"===n.field?a("span",{staticClass:"th-font"},[a("b-input",{attrs:{value:t.row.type_desc,placeholder:"กรุณาแก้ไขข้อมูล",icon:"book-open-variant",size:"is-small"},on:{blur:function(a){return e.changeTypeDesc(t.row.type_id,a)}}})],1):e._e()])]}))]}}])})],1)],1)])])])},i=[],o=(a("ac6a"),{data:function(){return{columns:[{field:"index",label:"ลำดับ",width:"50",numeric:!0,searchable:!1,centered:!0},{field:"type_name",label:"ชื่อประเภท",searchable:!0},{field:"type_desc",label:"รายละเอียดประเภท",searchable:!0},{field:"options",label:"ตัวเลือก",searchable:!1}],isPaginated:!0,isPaginationSimple:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:10,typeData:[],typeFetching:!0,currentTypeName:"",currentTypeDesc:"",alertMessage:"",alertPosition:"",alertType:""}},methods:{getTypeAsyncData:function(){var e=this;this.typeFetching=!0,this.$http.get("https://gservernodejs.herokuapp.com/api/type/all").then((function(t){var a=t.data;e.typeData=[],"ERROR|EMPTYINFO"!==a&&a.forEach((function(t){return e.typeData.push(t)}))})).catch((function(t){throw e.typeData=[],t})).finally((function(){e.typeFetching=!1}))},changeTypeName:function(e,t){var a=this;this.$http.post("https://gservernodejs.herokuapp.com/api/type/manage/name",{type_id:e,type_name:t.target.value}).then((function(e){"SUCCEED|UPDATED"===e.data&&(a.alertMessage="แก้ไขชื่อประเภทแล้วค่ะ",a.alertPosition="bottom-right",a.alertType="success",a.getTypeAsyncData(),a.alert())}))},changeTypeDesc:function(e,t){var a=this;this.$http.post("https://gservernodejs.herokuapp.com/api/type/manage/desc",{type_id:e,type_desc:t.target.value}).then((function(e){"SUCCEED|UPDATED"===e.data&&(a.alertMessage="แก้ไขรายละเอียดประเภทแล้วค่ะ",a.alertPosition="bottom-right",a.alertType="success",a.getTypeAsyncData(),a.alert())}))},deleteType:function(e){this.confirmCustomDelete(e)},alert:function(){this.$vs.notify({title:"Gentax",text:this.alertMessage,color:this.alertType,position:this.alertPosition})},confirmCustomDelete:function(e){var t=this;this.$buefy.dialog.confirm({title:"ยืนยันการลบประเภทสินค้า",message:"คุณมั่นใจว่าต้องการลบประเภทนี้, ข้อมูลจะไม่สามารถกู้คืนได้",confirmText:"ยืนยัน",cancelText:"ย้อนกลับ",type:"is-danger",hasIcon:!0,onConfirm:function(){t.$http.post("https://gservernodejs.herokuapp.com/api/type/delete",{type_id:e}).then((function(e){"SUCCEED|DELETED"===e.data&&(t.alertMessage="ลบประเภทสินค้าแล้วค่ะ",t.alertPosition="bottom-right",t.alertType="success",t.getTypeAsyncData(),t.alert())}))}})}},mounted:function(){this.getTypeAsyncData()}}),s=o,r=a("2877"),l=Object(r["a"])(s,n,i,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0a406b.57636064.js.map
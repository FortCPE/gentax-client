(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18260d0d"],{"00fd":function(e,t,n){var s=n("9e69"),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,r=s?s.toStringTag:void 0;function u(e){var t=a.call(e,r),n=e[r];try{e[r]=void 0;var s=!0}catch(u){}var i=o.call(e);return s&&(t?e[r]=n:delete e[r]),i}e.exports=u},"0714":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col md:w-4/4 w-full mb-base"},[n("vx-card",{attrs:{title:e.$t("ManageBusiness"),icon:"SettingsIcon"}},[n("b-table",{ref:"table",attrs:{data:e.businessData,loading:e.businessFetching,paginated:e.isPaginated,"per-page":e.perPage,"current-page":e.currentPage,"pagination-simple":e.isPaginationSimple,"pagination-position":e.paginationPosition,"default-sort-direction":e.defaultSortDirection,"sort-icon":e.sortIcon,"sort-icon-size":e.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","show-detail-icon":e.showDetailIcon,detailed:"","detail-key":"business_id"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.columns,(function(s){return[n("b-table-column",e._b({key:s.id,scopedSlots:e._u([{key:"searchable",fn:function(t){return s.searchable?[n("b-input",{attrs:{placeholder:"ค้นหาข้อมูล",icon:"magnify",size:"is-small"},model:{value:t.filters[t.column.field],callback:function(n){e.$set(t.filters,t.column.field,n)},expression:"props.filters[props.column.field]"}})]:void 0}}],null,!0)},"b-table-column",s,!1),["index"===s.field?n("span",[n("b-tag",{attrs:{rounded:"",type:"is-light"}},[e._v(e._s(t.index+1))])],1):"options"===s.field?n("span",[[n("vs-button",{attrs:{color:"primary",type:"relief",size:"small"},on:{click:function(n){return e.toggle(t.row)}}},[e._v("\n                                            ดูเพิ่มเติม\n                                        ")]),e._v("\n                                         \n                                        "),n("vs-button",{attrs:{color:"danger",type:"relief",size:"small"},on:{click:function(n){return e.deleteBusiness(t.row.business_id)}}},[e._v("\n                                            ลบ\n                                        ")])]],2):"business_name"===s.field?n("span",{staticClass:"th-font"},[n("b-input",{attrs:{value:t.row.business_name,placeholder:"กรุณาแก้ไขข้อมูล",icon:"pencil",size:"is-small"},on:{blur:function(n){return e.changeBusinessName(t.row.business_id,n)}}})],1):"business_tax"===s.field?n("span",{staticClass:"th-font"},[n("b-input",{attrs:{value:t.row.business_tax,placeholder:"กรุณาแก้ไขข้อมูลเลขภาษี",icon:"pencil",size:"is-small"},on:{blur:function(n){return e.changeBusinessTax(t.row.business_id,n)}}})],1):e._e()])]}))]}},{key:"detail",fn:function(t){return[n("article",{staticClass:"media"},[n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("b-field",{attrs:{horizontal:"",label:"ที่อยู่บริษัท"}},[n("b-input",{attrs:{type:"textarea",maxlength:"300",placeholder:"กรุณากรอกรายละเอียดสินค้า",value:t.row.business_address,size:"is-small"},on:{blur:function(n){return e.changeBusinessAddress(t.row.business_id,n)}}})],1),n("b-field",{attrs:{horizontal:"",label:"ตัวอักษรย่อ"}},[n("b-input",{attrs:{type:"text",placeholder:"กรุณากรอกตัวอักษรย่อ Invoice Number",size:"is-small",value:t.row.business_invoice},on:{blur:function(n){return e.changeBusinessInvoice(t.row.business_id,n)}}})],1)],1)])])]}}])})],1)],1)])])},i=[],a=(n("ac6a"),n("b047"),{data:function(){return{columns:[{field:"index",label:"ลำดับ",width:"50",numeric:!0,searchable:!1,centered:!0},{field:"business_name",label:"ชื่อบริษัท",searchable:!0},{field:"business_tax",label:"หมายเลขผู้เสียภาษี",searchable:!0},{field:"options",label:"ตัวเลือก",searchable:!1}],isPaginated:!0,isPaginationSimple:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:10,businessData:[],businessFetching:!0,currentBusinessName:"",currentBusinessTax:"",currentBusinessAddress:"",alertMessage:"",alertPosition:"",alertType:"",showDetailIcon:!1}},methods:{getBusinessAsyncData:function(){var e=this;this.businessData=[],this.businessFetching=!0,this.$http.get("https://gservernodejs.herokuapp.com/api/business/all").then((function(t){var n=t.data;e.businessData=[],"ERROR|EMPTYINFO"!==n&&n.forEach((function(t){return e.businessData.push(t)}))})).catch((function(t){throw e.businessData=[],t})).finally((function(){e.businessFetching=!1}))},changeBusinessName:function(e,t){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/business/manage/name",{business_id:e,business_name:t.target.value}).then((function(e){"SUCCEED|UPDATED"===e.data&&(n.alertMessage="แก้ไขชื่อบริษัทแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getBusinessAsyncData(),n.alert())}))},changeBusinessTax:function(e,t){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/business/manage/tax",{business_id:e,business_tax:t.target.value}).then((function(e){"SUCCEED|UPDATED"===e.data&&(n.alertMessage="แก้ไขข้อมูลบริษัทแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getBusinessAsyncData(),n.alert())}))},changeBusinessAddress:function(e,t){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/business/manage/address",{business_id:e,business_address:t.target.value}).then((function(e){"SUCCEED|UPDATED"===e.data&&(n.alertMessage="แก้ไขที่อยู่บริษัทแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getBusinessAsyncData(),n.alert())}))},changeBusinessInvoice:function(e,t){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/business/manage/invoice",{business_id:e,business_invoice:t.target.value}).then((function(e){"SUCCEED|UPDATED"===e.data&&(n.alertMessage="แก้ไขตัวอักษรย่อบริษัทแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getBusinessAsyncData(),n.alert())}))},deleteBusiness:function(e){this.confirmCustomDelete(e)},alert:function(){this.$vs.notify({title:"Gentax",text:this.alertMessage,color:this.alertType,position:this.alertPosition})},confirmCustomDelete:function(e){var t=this;this.$buefy.dialog.confirm({title:"ยืนยันการลบสินค้า",message:"คุณมั่นใจว่าต้องการลบสินค้าชิ้นนี้, สินค้าจะไม่สามารถกู้คืนได้",confirmText:"ลบสินค้า",cancelText:"ย้อนกลับ",type:"is-danger",hasIcon:!0,onConfirm:function(){t.$http.post("https://gservernodejs.herokuapp.com/api/business/delete",{business_id:e}).then((function(e){"SUCCEED|DELETED"===e.data&&(t.alertMessage="ลบสินค้าแล้วค่ะ",t.alertPosition="bottom-right",t.alertType="success",t.getBusinessAsyncData(),t.alert())}))}})},toggle:function(e){this.$refs.table.toggleDetails(e)}},mounted:function(){this.getBusinessAsyncData()}}),o=a,r=n("2877"),u=Object(r["a"])(o,s,i,!1,null,null,null);t["default"]=u.exports},1310:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},"1a8c":function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},"29f3":function(e,t){var n=Object.prototype,s=n.toString;function i(e){return s.call(e)}e.exports=i},"2b3e":function(e,t,n){var s=n("585a"),i="object"==typeof self&&self&&self.Object===Object&&self,a=s||i||Function("return this")();e.exports=a},3729:function(e,t,n){var s=n("9e69"),i=n("00fd"),a=n("29f3"),o="[object Null]",r="[object Undefined]",u=s?s.toStringTag:void 0;function c(e){return null==e?void 0===e?r:o:u&&u in Object(e)?i(e):a(e)}e.exports=c},"408c":function(e,t,n){var s=n("2b3e"),i=function(){return s.Date.now()};e.exports=i},"585a":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("c8ba"))},"9e69":function(e,t,n){var s=n("2b3e"),i=s.Symbol;e.exports=i},b047:function(e,t,n){var s=n("1a8c"),i=n("408c"),a=n("b4b0"),o="Expected a function",r=Math.max,u=Math.min;function c(e,t,n){var c,l,f,p,d,b,h=0,g=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError(o);function y(t){var n=c,s=l;return c=l=void 0,h=t,p=e.apply(s,n),p}function x(e){return h=e,d=setTimeout(w,t),g?y(e):p}function D(e){var n=e-b,s=e-h,i=t-n;return v?u(i,f-s):i}function _(e){var n=e-b,s=e-h;return void 0===b||n>=t||n<0||v&&s>=f}function w(){var e=i();if(_(e))return P(e);d=setTimeout(w,D(e))}function P(e){return d=void 0,m&&c?y(e):(c=l=void 0,p)}function T(){void 0!==d&&clearTimeout(d),h=0,c=b=l=d=void 0}function E(){return void 0===d?p:P(i())}function j(){var e=i(),n=_(e);if(c=arguments,l=this,b=e,n){if(void 0===d)return x(b);if(v)return clearTimeout(d),d=setTimeout(w,t),y(b)}return void 0===d&&(d=setTimeout(w,t)),p}return t=a(t)||0,s(n)&&(g=!!n.leading,v="maxWait"in n,f=v?r(a(n.maxWait)||0,t):f,m="trailing"in n?!!n.trailing:m),j.cancel=T,j.flush=E,j}e.exports=c},b4b0:function(e,t,n){var s=n("1a8c"),i=n("ffd6"),a=NaN,o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function f(e){if("number"==typeof e)return e;if(i(e))return a;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):r.test(e)?a:+e}e.exports=f},ffd6:function(e,t,n){var s=n("3729"),i=n("1310"),a="[object Symbol]";function o(e){return"symbol"==typeof e||i(e)&&s(e)==a}e.exports=o}}]);
//# sourceMappingURL=chunk-18260d0d.0629ab27.js.map
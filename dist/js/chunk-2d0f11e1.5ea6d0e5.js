(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f11e1"],{"9eed":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{attrs:{action:"javascript:void(0)"},on:{submit:function(e){return t.stockSubmit()}}},[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col md:w-12/12 w-full mb-base"},[n("vx-card",{attrs:{title:t.$t("ManageUnit"),icon:"AlertTriangleIcon"}},[n("b-table",{attrs:{data:t.unitData,loading:t.unitFetching,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(t.columns,(function(i){return[n("b-table-column",t._b({key:i.id,scopedSlots:t._u([{key:"searchable",fn:function(e){return i.searchable?[n("b-input",{attrs:{placeholder:"ค้นหาข้อมูล",icon:"magnify",size:"is-small"},model:{value:e.filters[e.column.field],callback:function(n){t.$set(e.filters,e.column.field,n)},expression:"props.filters[props.column.field]"}})]:void 0}}],null,!0)},"b-table-column",i,!1),["index"===i.field?n("span",[n("b-tag",{attrs:{rounded:"",type:"is-light"}},[t._v(t._s(e.index+1))])],1):"options"===i.field?n("span",[[n("vs-button",{attrs:{color:"danger",type:"relief",size:"small"},on:{click:function(n){return t.deleteUnit(e.row.unit_id)}}},[t._v("\n                                                ลบหน่วย\n                                            ")])]],2):"unit_name"===i.field?n("span",{staticClass:"th-font"},[n("b-input",{attrs:{value:e.row.unit_name,placeholder:"กรุณาแก้ไขข้อมูล",icon:"pencil",size:"is-small"},on:{blur:function(n){return t.changeUnitName(e.row.unit_id,n)}}})],1):"unit_desc"===i.field?n("span",{staticClass:"th-font"},[n("b-input",{attrs:{value:e.row.unit_desc,placeholder:"กรุณาแก้ไขข้อมูล",icon:"book-open-variant",size:"is-small"},on:{blur:function(n){return t.changeUnitDesc(e.row.unit_id,n)}}})],1):t._e()])]}))]}}])})],1)],1)])])])},a=[],o=(n("ac6a"),{data:function(){return{columns:[{field:"index",label:"ลำดับ",width:"50",numeric:!0,searchable:!1,centered:!0},{field:"unit_name",label:"ชื่อหน่วย",searchable:!0},{field:"unit_desc",label:"รายละเอียดหน่วย",searchable:!0},{field:"options",label:"ตัวเลือก",searchable:!1}],isPaginated:!0,isPaginationSimple:!0,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:10,unitData:[],unitFetching:!0,currentUnitName:"",currentUnitDesc:"",alertMessage:"",alertPosition:"",alertType:""}},methods:{getUnitAsyncData:function(){var t=this;this.unitFetching=!0,this.$http.get("https://gservernodejs.herokuapp.com/api/unit/all").then((function(e){var n=e.data;t.unitData=[],"ERROR|EMPTYINFO"!==n&&n.forEach((function(e){return t.unitData.push(e)}))})).catch((function(e){throw t.unitData=[],e})).finally((function(){t.unitFetching=!1}))},changeUnitName:function(t,e){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/unit/manage/name",{unit_id:t,unit_name:e.target.value}).then((function(t){"SUCCEED|UPDATED"===t.data&&(n.alertMessage="แก้ไขชื่อหน่วยแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getUnitAsyncData(),n.alert())}))},changeUnitDesc:function(t,e){var n=this;this.$http.post("https://gservernodejs.herokuapp.com/api/unit/manage/desc",{unit_id:t,unit_desc:e.target.value}).then((function(t){"SUCCEED|UPDATED"===t.data&&(n.alertMessage="แก้ไขรายละเอียดหน่วยแล้วค่ะ",n.alertPosition="bottom-right",n.alertType="success",n.getUnitAsyncData(),n.alert())}))},deleteUnit:function(t){this.confirmCustomDelete(t)},alert:function(){this.$vs.notify({title:"Gentax",text:this.alertMessage,color:this.alertType,position:this.alertPosition})},confirmCustomDelete:function(t){var e=this;this.$buefy.dialog.confirm({title:"ยืนยันการลบหน่วยสินค้า",message:"คุณมั่นใจว่าต้องการลบหน่วยสินค้านี้, ข้อมูลจะไม่สามารถกู้คืนได้",confirmText:"ลบหน่วย",cancelText:"ย้อนกลับ",type:"is-danger",hasIcon:!0,onConfirm:function(){e.$http.post("https://gservernodejs.herokuapp.com/api/unit/delete",{unit_id:t}).then((function(t){"SUCCEED|DELETED"===t.data&&(e.alertMessage="ลบหน่วยสินค้าแล้วค่ะ",e.alertPosition="bottom-right",e.alertType="success",e.getUnitAsyncData(),e.alert())}))}})}},mounted:function(){this.getUnitAsyncData()}}),s=o,r=n("2877"),l=Object(r["a"])(s,i,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0f11e1.5ea6d0e5.js.map